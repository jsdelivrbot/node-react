# React
Provides the view to display the state of the application
-   Class Component: Used when we need state.
-   Functional Component: Simple component that takes some number of properties and returns
    some static amount of jsx.
-   State: Whenever we change our state, the component re-renders, along with
    any children components it contains.
-   Import/Export: Library - just give the name, custom - give local address.
-   Callbacks: Helpful for parent child communication.

# Redux
Constructs and manages the data (state) of the application
- Reducer: A function that returns a piece of the applications state
- Our application state is formed by the reducers.
- Reducers all get tied together with the combineReducers method
- For each key in that function, we assign one reducer
- Reducers change state through the use of actions (in the switch case)

React and Redux are not connected - they are separate projects.
We can connect them using React-Redux. To do this we turn components into
containers (smarter components), which can connect to state.

# React-Redux
The glue between react and redux. Uses container components to connect to state.
Application state is generated by reducer functions. 

## Actions (click, hover, page loading, etc.)
- Can optionally call an Action Creator - which is a function that returns an Action object.
- The object has a type that describes the type of Action that was just triggered. 
- The Action can also have some data that further describes an action.
- The Action is automatically sent to all of the reducers in our application.

Inside of our reducers, we'll set up a switch statement which will go to a
case depending on the type of the Action. Once all reducers have processed
the action and returned new state, the new state has been assembled.
All containers will re-render with new props if their state has changed.

## Action Creators
- Simple functions that return an action, an action is just a javascript object. 
- Actions must always have a type and can have a payload, and any other properties.

## Middleware
Apply middleware in src/index.js `applyMiddleware()`

Middlewares are functions that take an action, and depending on the actions type and 
it's payload or any factor, the middleware can choose to let the action pass through, 
it can manipulate the action, console.log, or anything, before the action reaches the 
reducer. Think of it as a gate-keeper. By intercepting the actions, we can do some
interesting things with it. All actions flow through it, so we can modify actions if
we want before they hit the reducer.

- redux-promise: this library will help us with ajax requests
> npm install redux-promise --save
- axios: this library is used for ajax requests too
> npm install axios --save
- react-sparklines: this library is used for simple charts
> npm install react-sparklines@1.6.0 --save
- lodash: this library with a ton of helper functions
> npm install lodash --save
- react-google-maps: this library has GoogleMap components
> npm install react-google-maps --save
- react-router-dom: 
> npm install react-router-dom@4.0.0 --save

* googlemaps is integrated in index.html

### What did we do in youtube-clone?
We learned about React Components and connected to the Youtube API.

### What did we do in book-list?
We tied an action creator to our BookList items. When a user clicks on a BookList item,
it called an action creator, which dispatched our action. That action was automatically 
sent to our reducers. The reducers that cared about that action returned a peice of state,
which is assembled as the global application state. That global application state is then
injected back into all of the different containers inside of our app. The containers then 
re-rendered, and caused the view to update.

**Before Making Components?**
Ask, is this a container or a component?
If it needs access to Redux state, it should be a container.
If it is getting it's data from it's parent, it should be a component.

**Should it be a Class based component or Functional?**
No state to deal with? Functional

### React Tips
If you ever see any code that is getting repeated using React Components,
think about making a new component for it. like `chart.js`

### What did we do in weather-forecast
A lot of redux. Action creator fetchWeather. Created constant for the
action type. The use of middleware, redux-promise. We used it to handle
a promise that we received from using axios, which we used to make our
ajax request. The middleware resolved and handled the data before sending
it to the reducers. We covered how in reducers we don't want to mutate
our state, or modify it directly. Instead we return a new object that
will take the place of our existing state. We also used the destructuring
operator '...' with arrays. Then we used the SparkLines library for our
charts, and used a few utility functions from lodash to help. We made
use of the google-maps api.

# Another summary of Redux
Redux contains our application state, which is generated by a series of 
reducers that we write. That state is then modified by calling Action Creators.
Action Creators return actions which flow through middleware and then to reducers.
Whenever a new set of state is produced, it flows into our containers and those 
containers re-render themselves. Then, the entire process starts all over again.

# React Router
## How Web Pages Used To Work
When a user changes the URL...

+----------+ ----- request ----->  +--------+               
| web page |                       | server |
+----------+ <-- new html page --  +--------+  

With React Router we are no longer making requests to the server for a web page,
receiving the page back, and then showing it to the user. Instead React Router
intercepts changes to the URL. It stops the user from navigating to that page,
and instead it looks at the URL and determines a different set of components
on the screen based on what that new URL is.

## How Web Pages Work with React Router
When a user changes the URL...

+----------+ ----- Inform History the user -----> +---------+
| web page |       the user changed the URL,      | History |
+----------+       give History the new URL       +---------+
     ^                                                 |
     |                                                 | Give React Router the
     | Content!                                        | new URL
     |                                                 v
 +-------+                                     +--------------+
 | React | <---------------------------------- | React Router |
 +-------+    Give React components to         +--------------+
                     render                    Updates the react components
                                               shown on the screen, depending
                                               on the URL

React renders the components, then waits until it needs to re-render other
components.

# What We Need To Do
- Configure React Router

### Navigation in React Router
- Link from 'react-router-dom'
When you click on a Link, it doesn't issue a request to fetch an html
document, though it looks like it does. React Router prevents that default
behavior.

### Redux Form
### What Does It Do For Us? Why Use It?
Manages your form state in Redux. Provides form validation. It doesn't post
our data though, thats defined by us. 
> npm install redux-form@6.6.3 --save

We need to import a reducer from the redux-form library and hook it
up to our combineReducers call. It saves us from having to wire up a
bunch of manual action creators, so it saves us a lot of time.

#### Guideline on how to use redux form
Identify different pieces of form state 
Make one 'Field component per piece of state 
User changes a 'Field' input 

**Redux form automatically handles changes**
User submits form 
We validate inputs and handle form submittal

3 states of our form:
- pristine: has not been touched by the user
- touched: has been touched by the user
- invalid: has been touched by the user, and contains invalid input

### What did we do in blog?
Made use of react-router-dom, to give it the idea of navigation.
Created separate routes, dtied to a path. A path will display a component.
GIves user impression of navigating. Path wildcarfs like `:id` are important,
we made use of it for deleting, and displaying? Passing callbacks to action creators,
can help with navigation (ondDelete). mapStateToProps(), a good place to do intermediate 
lookup/filtering using ownProps. In reducer, we made use of
mapKeys() to treat our state object as an object, not an array. We took all
our existing stae, and just added in one record in FETCH_POST.


# React + Redux Cycle

            User clicks something
+---------+                        +------------------+
|  React  |  ------------------>   |  Action Creator  |
+---------+                        +------------------+
    ^                                   |       produces a...
    |                                   V
    |                              +----------+
    |                              |  Action  |
    |                              +----------+
    |                                   |       flows into...
    |                                   V
    |                              +--------------+
    |                              |  Middleware  |             __
    |                              +--------------+               |
    |                                   |       passes action...  |
    |                                   V                         |
    |                              +------------+                 |
    |                              |  Reducers  |                 | Dispatch
    |                              +------------+                 |
    |                                   |       produces...       |
    |                                   V                         |
    |           flows into         +---------+                    |
    |___________________________   |  State  |                    |
                                   +---------+                  __|

What if we want to do an asynchronous request between these steps?
Each step only executes when the previous one completes

## How dispatch works

             Action Creator
                   |
                   v
                 Action
                   |
                   v
            ________________
            \   Dispatch   /  Makes sure the action gets sent to 
             \            /   all reducers
              \          /
               \        /
                |______|
               /   |    \
              /    |     \
       Reducer  Reducer  Reducer


# MVC Analogies
1. Actions = Controller
Whenever you want something to happen in your app (load data, change something on the screen)
you will have to dispatch an action.

2. Reducer = Model
Reducers are in charge of holding the current state of your application. It will also be the part
that decides what to do when an action is called. With Redux you have a reducer handle an action 
to set your state.

3. Components = View
Components display the information that they get from the state.

So Remember:
- Define your Action
- Define your Reducer
- Define the Actions as a Prop in your Component
- Wire it up in your View